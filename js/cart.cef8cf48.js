(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cart"],{"0584":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"border-b border-gray-200 py-8 mb-6"},[r("p",{staticClass:"text-lg text-gray-600"},[t._v(t._s(t.text))])])},a=[],i={name:"pageHeader",props:{text:{type:String,required:!0}}},o=i,n=r("2877"),c=Object(n["a"])(o,s,a,!1,null,null,null);e["a"]=c.exports},"768d":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.errors,(function(e,s){return r("div",{key:s},[e.book_id===t.item.book.id?r("div",{staticClass:"bg-blue-100 text-blue-500 text-sm p-4 rounded-lg my-4 flex items-start space-x-2"},[r("div",{staticClass:"flex items-start space-x-3 w-full"},[r("svg",{staticClass:"w-5 h-5 flex-none",attrs:{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"currentColor",d:"M12,2A10,10,0,1,0,22,12,10.01114,10.01114,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.00917,8.00917,0,0,1,12,20Zm0-8.5a1,1,0,0,0-1,1v3a1,1,0,0,0,2,0v-3A1,1,0,0,0,12,11.5Zm0-4a1.25,1.25,0,1,0,1.25,1.25A1.25,1.25,0,0,0,12,7.5Z"}})]),r("span",[t._v(t._s(e.message))])]),r("div",{staticClass:"hover:bg-blue-200 p-1 rounded-full cursor-pointer",on:{click:function(e){return t.removeErrorMessage(s)}}},[r("svg",{staticClass:"w-5 h-5 flex-none",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"currentColor",d:"M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"}})])])]):t._e()])})),0)},a=[],i=(r("a434"),{name:"quantityErrors",props:{item:{type:Object,required:!0},errors:{type:Array,required:!0}},methods:{removeErrorMessage:function(t){this.errors.splice(t,1)}}}),o=i,n=r("2877"),c=Object(n["a"])(o,s,a,!1,null,null,null);e["a"]=c.exports},b789:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.items.length>0?r("div",[r("pageHeader",{attrs:{text:"Carrello"}}),t._l(t.items,(function(e,s){return r("div",{key:s,staticClass:"py-4"},[r("quantityErrors",{attrs:{item:e,errors:t.errors}}),r("section",{staticClass:"flex space-x-4 items-start"},[r("router-link",{attrs:{to:{name:"Book.show",params:{id:e.book.id}}}},[r("div",{staticClass:"h-36 w-24 flex-none"},[r("img",{staticClass:"object-cover w-full h-full shadow-lg",attrs:{src:"https://source.unsplash.com/random",alt:""}})])]),r("div",{staticClass:"flex flex-col space-y-4 md:space-y-0 md:flex-row md:space-x-10 justify-between md:items-center"},[r("div",{staticClass:"w-2/3"},[r("h3",{staticClass:"text-gray-600 leading-tight text-sm md:text-base mb-1"},[t._v(t._s(e.book.title))]),r("div",{staticClass:"md:flex md:items-center md:space-x-2 text-xs lg:text-sm"},[t._l(e.book.authors,(function(e){return r("router-link",{key:e.id,staticClass:"block leading-tight text-gray-400 hover:text-gray-600",attrs:{to:""}},[t._v(" "+t._s(e.name)+" ")])})),r("span",{staticClass:"text-gray-400 text-xs"},[t._v("•")]),r("div",{staticClass:"flex items-center space-x-2"},t._l(e.book.genres,(function(e){return r("router-link",{key:e.id,staticClass:"block leading-tight text-gray-400 hover:text-gray-600",attrs:{to:{name:"Genre.show",params:{id:e.id}}}},[t._v(" "+t._s(e.name)+" ")])})),1)],2),r("p",{staticClass:"text-xs text-gray-400 leading-tight mt-2 hidden md:block"},[t._v(" "+t._s(t._f("truncate")(e.book.description))+" ")])]),r("div",{staticClass:"flex space-x-1 text-sm"},[r("div",{staticClass:"border py-1 px-3 bg-white text-gray-600 cursor-pointer",on:{click:function(r){return t.decreaseQuantity(e)}}},[t._v(" - ")]),r("div",{staticClass:"border py-1 px-3 bg-white text-gray-600"},[t._v(" "+t._s(e.quantity)+" ")]),r("div",{staticClass:"border py-1 px-3 bg-white text-gray-600 cursor-pointer",on:{click:function(r){return t.increaseQuantity(e)}}},[t._v(" + ")])]),r("p",{staticClass:"text-base text-primary-300"},[t._v("€"+t._s(e.book.price*e.quantity)+",00")]),r("div",{staticClass:"flex items-center space-x-2"},[r("div",{staticClass:"text-xs text-gray-400 hover:underline transition cursor-pointer whitespace-nowrap",on:{click:function(r){return t.removeFromCart(e.book,s)}}},[r("svg",{staticClass:"w-4 h-4 flex-none text-gray-400 hover:text-gray-600 transition cursor-pointer",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"currentColor",d:"M20,6H16V5a3,3,0,0,0-3-3H11A3,3,0,0,0,8,5V6H4A1,1,0,0,0,4,8H5V19a3,3,0,0,0,3,3h8a3,3,0,0,0,3-3V8h1a1,1,0,0,0,0-2ZM10,5a1,1,0,0,1,1-1h2a1,1,0,0,1,1,1V6H10Zm7,14a1,1,0,0,1-1,1H8a1,1,0,0,1-1-1V8H17Z"}})])]),r("div",{staticClass:"text-xs text-gray-400 hover:underline transition cursor-pointer whitespace-nowrap",on:{click:function(r){return t.moveToFavourite(e.book,s)}}},[r("svg",{staticClass:"w-4 h-4 flex-none text-gray-400 hover:text-gray-600 transition cursor-pointer",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"currentColor",d:"M16,2H8A3,3,0,0,0,5,5V21a1,1,0,0,0,.5.87,1,1,0,0,0,1,0L12,18.69l5.5,3.18A1,1,0,0,0,18,22a1,1,0,0,0,.5-.13A1,1,0,0,0,19,21V5A3,3,0,0,0,16,2Zm1,17.27-4.5-2.6a1,1,0,0,0-1,0L7,19.27V5A1,1,0,0,1,8,4h8a1,1,0,0,1,1,1Z"}})])])])])],1)],1)})),r("div",{staticClass:"flex md:justify-end py-6 mt-6 border-t"},[r("div",[r("p",{staticClass:"text-gray-400 mb-4"},[t._v("Totale €"+t._s(t.total)+",00")]),r("router-link",{staticClass:"block max-w-max bg-secondary-100 hover:bg-secondary-200 transition focus:outline-none text-white text-sm px-4 py-3",attrs:{to:{name:"Checkout"}}},[t._v(" Procedi al pagamento ")]),r("div",{staticClass:"mt-1 flex items-center space-x-2 max-w-max text-gray-400 hover:text-gray-600 transition text-xs cursor-pointer",on:{click:function(e){return t.removeAllFromCart()}}},[r("span",[t._v("Svuota carrello")]),r("svg",{staticClass:"w-4 h-4 flex-none",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"currentColor",d:"M20,6H16V5a3,3,0,0,0-3-3H11A3,3,0,0,0,8,5V6H4A1,1,0,0,0,4,8H5V19a3,3,0,0,0,3,3h8a3,3,0,0,0,3-3V8h1a1,1,0,0,0,0-2ZM10,5a1,1,0,0,1,1-1h2a1,1,0,0,1,1,1V6H10Zm7,14a1,1,0,0,1-1,1H8a1,1,0,0,1-1-1V8H17Z"}})])])],1)])],2):r("div",{staticClass:"pt-10 text-sm text-center"},[r("p",{staticClass:"text-gray-400"},[t._v("Il tuo carrello è vuoto.")]),r("router-link",{staticClass:"text-gray-500 max-w-max",attrs:{to:{name:"Book.index"}}},[t._v(" Continua lo shopping ")])],1)])},a=[],i=(r("d3b7"),r("159b"),r("7db0"),r("0584")),o=r("768d"),n={name:"Cart",components:{pageHeader:i["a"],quantityErrors:o["a"]},mounted:function(){this.checkQuantity()},data:function(){return{errors:[{message:"",book_id:""}]}},computed:{items:function(){return this.$store.getters["cart/items"]},favourites:function(){return this.$store.getters["favourites/favourites"]},total:function(){var t=0;return this.items.forEach((function(e){return t+=e.book.price*e.quantity})),t}},methods:{removeFromCart:function(t,e){this.$store.dispatch("cart/removeFromCart",{book:t,index:e})},moveToFavourite:function(t,e){this.removeFromCart(t,e);var r=this.favourites.find((function(e){return e.id==t.id}));r?alert("Questo libro è già presente nella tua lista preferiti."):this.$store.dispatch("favourites/addToFavourite",{book:t})},removeAllFromCart:function(){this.$store.dispatch("cart/removeAllFromCart")},decreaseQuantity:function(t){t.quantity<=1||this.$store.dispatch("cart/decreaseQuantity",{book:t.book})},increaseQuantity:function(t){t.quantity!=t.book.quantity_in_stock?this.$store.dispatch("cart/increaseQuantity",{item:t}):alert(1==t.book.quantity_in_stock?"E' rimasta solo 1 copia":"Sono rimaste solo "+t.book.quantity_in_stock+" copie")},checkQuantity:function(){var t=this;this.items.forEach((function(e){e.quantity>e.book.quantity_in_stock&&(t.errors.push({message:"Sono disponibili solo "+e.book.quantity_in_stock+' copie di "'+e.book.title+'"',book_id:e.book.id}),t.$store.dispatch("cart/adjustQuantity",{item:e}))}))}},filters:{truncate:function(t){return t.length>150?t.substring(0,150)+"...":t}}},c=n,l=r("2877"),u=Object(l["a"])(c,s,a,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=cart.cef8cf48.js.map