(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bookReviews"],{"408a":function(e,t,r){var s=r("e330");e.exports=s(1..valueOf)},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var s=r("e330"),i=r("1d80"),a=r("577e"),n=r("5899"),o=s("".replace),c="["+n+"]",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),v=function(e){return function(t){var r=a(i(t));return 1&e&&(r=o(r,u,"")),2&e&&(r=o(r,l,"")),r}};e.exports={start:v(1),end:v(2),trim:v(3)}},7156:function(e,t,r){var s=r("1626"),i=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var n,o;return a&&s(n=t.constructor)&&n!==r&&i(o=n.prototype)&&o!==r.prototype&&a(e,o),e}},"82ef":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.user?r("div",[e.user.image?r("img",{attrs:{src:e.imagePath,alt:"user image"}}):r("img",{attrs:{src:"https://eu.ui-avatars.com/api/?name="+e.user.name,alt:"user image"}})]):r("div",[r("img",{attrs:{src:"https://eu.ui-avatars.com/api/?name=undefined",alt:"user image"}})])])},i=[],a={name:"userImage",props:{user:{type:[Object,null],required:!1}},computed:{imagePath:function(){return"http://localhost:8000/storage/"+this.user.image.url}}},n=a,o=r("2877"),c=Object(o["a"])(n,s,i,!1,null,null,null);t["a"]=c.exports},"8d1a":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{staticClass:"py-6 flex items-center text-sm"},[e._l(e.routes,(function(t,s){return r("div",{key:s,staticClass:"flex items-center mr-1"},[r("router-link",{staticClass:"text-gray-400 hover:text-gray-500 transition mr-1",attrs:{to:{name:t.name,params:t.params}}},[e._v(" "+e._s(t.text)+" ")]),r("svg",{staticClass:"w-4 h-4 flex-none text-gray-400 mt-0.5",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"currentColor",d:"M14.83,11.29,10.59,7.05a1,1,0,0,0-1.42,0,1,1,0,0,0,0,1.41L12.71,12,9.17,15.54a1,1,0,0,0,0,1.41,1,1,0,0,0,.71.29,1,1,0,0,0,.71-.29l4.24-4.24A1,1,0,0,0,14.83,11.29Z"}})])],1)})),r("span",{staticClass:"text-gray-600"},[e._v(e._s(e.current))])],2)},i=[],a={name:"breadcrumb",props:{routes:{type:Array,required:!0},current:{type:String,required:!0}}},n=a,o=r("2877"),c=Object(o["a"])(n,s,i,!1,null,null,null);t["a"]=c.exports},9390:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.book?r("div",[r("h3",{staticClass:"text-xl font-semibold text-gray-600 mt-4"},[e._v("Tutte le recensioni")]),r("breadcrumb",{attrs:{routes:[{name:"Book.index",text:"Libri"},{name:"Book.show",params:{id:e.book.id},text:e.book.title}],current:"recensioni"}}),r("div",{staticClass:"flex items-center justify-between mb-10 pb-10 border-b"},[r("p",{staticClass:"text-gray-500 text-sm"},[e._v(e._s(e.reviews.length)+" recensioni")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.sort,expression:"sort"}],staticClass:"bg-white text-xs text-gray-500 p-2 focus:outline-none border border-gray-200",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.sort=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"created_desc"}},[e._v("Data più recente")]),r("option",{attrs:{value:"created_asc"}},[e._v("Data meno recente")]),r("option",{attrs:{value:"rating_desc"}},[e._v("Valutazione più alta")]),r("option",{attrs:{value:"rating_asc"}},[e._v("Valutazione più bassa")])])]),e._l(e.reviews,(function(e){return r("singleReview",{key:e.id,attrs:{review:e}})}))],2):e._e()},i=[],a=(r("a9e3"),r("4e82"),r("9705")),n=r("8d1a"),o={name:"book.reviews",components:{singleReview:a["a"],breadcrumb:n["a"]},props:{id:{type:Number,required:!0}},mounted:function(){this.getBook(),this.getReviews()},watch:{sort:function(){this.getReviews()}},data:function(){return{sort:"created_desc"}},computed:{book:function(){return this.$store.getters["books/book"]},reviews:function(){return this.$store.getters["books/reviews"]}},methods:{getBook:function(){this.$store.dispatch("books/getBook",{id:this.id})},getReviews:function(){this.$store.dispatch("books/getReviews",{id:this.id,rating:null,sort:this.sort})}}},c=o,u=r("2877"),l=Object(u["a"])(c,s,i,!1,null,null,null);t["default"]=l.exports},9705:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pb-10"},[r("div",{staticClass:"flex space-x-4"},[r("div",{staticClass:"flex-none"},[r("userImage",{staticClass:"w-9 rounded-full",attrs:{user:e.review.user}})],1),r("div",[r("div",{staticClass:"flex items-start space-x-3"},[e.review.user?r("h4",{staticClass:"text-gray-600 text-sm font-semibold"},[e._v(e._s(e.review.user.name))]):r("h4",{staticClass:"text-gray-400 text-sm"},[e._v("Utente cancellato")]),r("div",{staticClass:"flex items-center space-x-4"},[r("div",{staticClass:"flex items-center"},[e._l(e.review.rating,(function(t){return r("svg",{key:t+e.$uniqid(),staticClass:"w-4 flex-none text-primary-300",attrs:{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"currentColor",d:"M22,10.1c0.1-0.5-0.3-1.1-0.8-1.1l-5.7-0.8L12.9,3c-0.1-0.2-0.2-0.3-0.4-0.4C12,2.3,11.4,2.5,11.1,3L8.6,8.2L2.9,9C2.6,9,2.4,9.1,2.3,9.3c-0.4,0.4-0.4,1,0,1.4l4.1,4l-1,5.7c0,0.2,0,0.4,0.1,0.6c0.3,0.5,0.9,0.7,1.4,0.4l5.1-2.7l5.1,2.7c0.1,0.1,0.3,0.1,0.5,0.1v0c0.1,0,0.1,0,0.2,0c0.5-0.1,0.9-0.6,0.8-1.2l-1-5.7l4.1-4C21.9,10.5,22,10.3,22,10.1z"}})])})),e._l(5-e.review.rating,(function(t){return r("svg",{key:t+e.$uniqid(),staticClass:"w-4.5 flex-none text-gray-300",attrs:{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"currentColor",d:"M22,10.1c0.1-0.5-0.3-1.1-0.8-1.1l-5.7-0.8L12.9,3c-0.1-0.2-0.2-0.3-0.4-0.4C12,2.3,11.4,2.5,11.1,3L8.6,8.2L2.9,9C2.6,9,2.4,9.1,2.3,9.3c-0.4,0.4-0.4,1,0,1.4l4.1,4l-1,5.7c0,0.2,0,0.4,0.1,0.6c0.3,0.5,0.9,0.7,1.4,0.4l5.1-2.7l5.1,2.7c0.1,0.1,0.3,0.1,0.5,0.1v0c0.1,0,0.1,0,0.2,0c0.5-0.1,0.9-0.6,0.8-1.2l-1-5.7l4.1-4C21.9,10.5,22,10.3,22,10.1z"}})])}))],2)])]),r("span",{staticClass:"block text-gray-400 text-xs"},[e._v(e._s(e.$moment(e.review.created_at).format("DD-MM-YYYY H:mm")))]),r("div",{staticClass:"mt-2 text-sm"},[e.review.title?r("p",{staticClass:"leading-tight text-gray-600 mb-1"},[e._v(e._s(e.review.title))]):e._e(),r("p",{staticClass:"text-gray-400 leading-tight"},[e._v(e._s(e.review.body))])]),"Reviews"===e.$route.name?r("div",{staticClass:"mt-4 text-xs text-gray-400 "},[r("span",[e._v("Recensione di: ")]),r("router-link",{staticClass:"hover:text-primary-300 transition",attrs:{to:{name:"Book.show",params:{id:e.review.book.id}}}},[e._v(" "+e._s(e.review.book.title)+" ")])],1):e._e(),"Reviews"===e.$route.name&&e.user&&e.user.id===e.review.user.id?r("div",{staticClass:"mt-4 text-xs text-gray-400 flex items-center space-x-2"},[r("span",{staticClass:"cursor-pointer hover:text-primary-300 transition",on:{click:function(t){return e.openEditMenu()}}},[e._v("Modifica")]),r("span",{staticClass:"cursor-pointer hover:text-red-500 transition",on:{click:function(t){return e.deleteReview()}}},[e._v("Elimina")])]):e._e()])])])},i=[],a=(r("a9e3"),r("82ef")),n={name:"singleReview",components:{userImage:a["a"]},props:{review:{type:Object,required:!0},index:{type:Number,required:!1}},computed:{user:function(){return this.$store.getters["auth/user"]}},methods:{deleteReview:function(){confirm("Eliminare la recensione?")&&this.$store.dispatch("reviews/deleteReview",{id:this.review.id,index:this.index})},openEditMenu:function(){this.$emit("openEditMenu",this.review)}}},o=n,c=r("2877"),u=Object(c["a"])(o,s,i,!1,null,null,null);t["a"]=u.exports},a9e3:function(e,t,r){"use strict";var s=r("83ab"),i=r("da84"),a=r("e330"),n=r("94ca"),o=r("6eeb"),c=r("1a2d"),u=r("7156"),l=r("3a9b"),v=r("d9b5"),d=r("c04e"),p=r("d039"),m=r("241c").f,f=r("06cf").f,g=r("9bf2").f,x=r("408a"),w=r("58a8").trim,b="Number",h=i[b],_=h.prototype,y=i.TypeError,C=a("".slice),k=a("".charCodeAt),E=function(e){var t=d(e,"number");return"bigint"==typeof t?t:N(t)},N=function(e){var t,r,s,i,a,n,o,c,u=d(e,"number");if(v(u))throw y("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=w(u),t=k(u,0),43===t||45===t){if(r=k(u,2),88===r||120===r)return NaN}else if(48===t){switch(k(u,1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+u}for(a=C(u,2),n=a.length,o=0;o<n;o++)if(c=k(a,o),c<48||c>i)return NaN;return parseInt(a,s)}return+u};if(n(b,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var I,R=function(e){var t=arguments.length<1?0:h(E(e)),r=this;return l(_,r)&&p((function(){x(r)}))?u(Object(t),r,R):t},$=s?m(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),M=0;$.length>M;M++)c(h,I=$[M])&&!c(R,I)&&g(R,I,f(h,I));R.prototype=_,_.constructor=R,o(i,b,R)}}}]);
//# sourceMappingURL=bookReviews.0aed003d.js.map