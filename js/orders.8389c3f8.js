(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orders"],{"0584":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"border-b border-gray-200 py-8 mb-6"},[s("p",{staticClass:"text-lg text-gray-600"},[t._v(t._s(t.text))])])},i=[],a={name:"pageHeader",props:{text:{type:String,required:!0}}},n=a,o=s("2877"),c=Object(o["a"])(n,r,i,!1,null,null,null);e["a"]=c.exports},2532:function(t,e,s){"use strict";var r=s("23e7"),i=s("e330"),a=s("5a34"),n=s("1d80"),o=s("577e"),c=s("ab13"),l=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~l(o(n(this)),o(a(t)),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,s){var r=s("861d"),i=s("c6b6"),a=s("b622"),n=a("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==i(t))}},"5a34":function(t,e,s){var r=s("da84"),i=s("44e7"),a=r.TypeError;t.exports=function(t){if(i(t))throw a("The method doesn't accept regular expressions");return t}},"67e3":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("pageHeader",{attrs:{text:"I miei acquisti"}}),t.orders?s("div",[t._l(t.orders,(function(e){return s("div",{key:e.id,staticClass:"border-b py-6"},[s("h2",{staticClass:"mb-4 text-gray-500"},[t._v("Ordine numero: "+t._s(e.id))]),t._l(e.books,(function(r){return s("div",{key:r.id,staticClass:"flex space-x-4",class:{"mb-8":e.books.length>1}},[s("div",[s("router-link",{staticClass:"h-24 w-18 block",attrs:{to:{name:"Book.show",params:{id:r.id}}}},[s("img",{staticClass:"object-cover w-full h-full shadow-lg",attrs:{src:"https://source.unsplash.com/random",alt:""}})])],1),s("div",[s("p",{staticClass:"text-gray-600 text-sm"},[t._v(t._s(r.title))]),t.hasBeenReviewed(r.id)?t._e():s("button",{staticClass:"text-sm text-primary-300 hover:underline transition block",on:{click:function(e){return t.openSidebarReview(r)}}},[t._v(" Lascia una recensione ")]),s("p",{staticClass:"text-gray-400 leading-tight text-xs md:text-sm mt-2"},[t._v(t._s(t._f("truncate")(r.description)))]),s("div",{staticClass:"flex items-center space-x-4 mt-4"},[s("div",[s("span",{staticClass:"text-xs text-gray-400 block"},[t._v("totale")]),s("span",{staticClass:"text-sm"},[t._v(t._s(e.total)+"â‚¬")])]),s("div",[s("span",{staticClass:"text-xs text-gray-400 block"},[t._v("Acquistato il")]),s("span",{staticClass:"text-sm"},[t._v(t._s(t.$moment(e.created_at).format("DD-MM-YYYY H:m")))])])])])])}))],2)})),s("addReview",{attrs:{book:t.selectedBook},on:{emptySelectedBook:t.emptySelectedBook}})],2):t._e()],1)},i=[],a=(s("caad"),s("2532"),s("0584")),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show?s("div",{staticClass:"fixed inset-0 bg-black opacity-20 z-10",on:{click:function(e){return t.closeSidebarReview()}}}):t._e(),s("div",{staticClass:"fixed transform transition ease-linear bg-white right-0 top-0 bottom-0 z-20 w-full md:w-96 shadow-xl",class:{"translate-x-full":!t.show}},[s("header",{staticClass:"border-b p-6 flex justify-between items-center"},[s("span",{staticClass:"block text-gray-600 text-sm"},[t._v("Lascia una recensione")]),s("svg",{staticClass:"w-5 h-5 flex-none text-gray-400 hover:text-gray-600 transition cursor-pointer",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},on:{click:function(e){return t.closeSidebarReview()}}},[s("path",{attrs:{fill:"currentColor",d:"M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"}})])]),s("div",{staticClass:"p-6"},[s("p",{staticClass:"text-xs text-gray-400 mb-1"},[t._v("Recensione per")]),s("p",{staticClass:"text-sm text-gray-600 leading-tight"},[t._v(t._s(t.book.title))])]),s("form",{staticClass:"p-6",on:{submit:function(e){return e.preventDefault(),t.storeReview.apply(null,arguments)}}},[s("errorMessages",{attrs:{errors:t.errors}}),s("div",{staticClass:"mb-6"},[s("label",{staticClass:"text-xs text-gray-400 mb-1 block",attrs:{for:"title"}},[t._v("Dai un titolo alla tua recensione")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.review.title,expression:"review.title"}],staticClass:"w-full border border-gray-100 focus:outline-none focus:border-primary-100 transition p-3 text-sm",attrs:{type:"text",name:"title"},domProps:{value:t.review.title},on:{input:function(e){e.target.composing||t.$set(t.review,"title",e.target.value)}}})]),s("div",{staticClass:"mb-6"},[s("label",{staticClass:"text-xs text-gray-400 mb-1 block",attrs:{for:"title"}},[t._v("La tua valutazione *")]),s("div",{staticClass:"flex items-center"},t._l(5,(function(e){return s("svg",{key:e,staticClass:"w-5 flex-none text-gray-300",class:{"text-primary-300":e<=t.review.rating},attrs:{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",viewBox:"0 0 24 24"},on:{click:function(s){return t.selectRating(e)}}},[s("path",{attrs:{fill:"currentColor",d:"M22,10.1c0.1-0.5-0.3-1.1-0.8-1.1l-5.7-0.8L12.9,3c-0.1-0.2-0.2-0.3-0.4-0.4C12,2.3,11.4,2.5,11.1,3L8.6,8.2L2.9,9C2.6,9,2.4,9.1,2.3,9.3c-0.4,0.4-0.4,1,0,1.4l4.1,4l-1,5.7c0,0.2,0,0.4,0.1,0.6c0.3,0.5,0.9,0.7,1.4,0.4l5.1-2.7l5.1,2.7c0.1,0.1,0.3,0.1,0.5,0.1v0c0.1,0,0.1,0,0.2,0c0.5-0.1,0.9-0.6,0.8-1.2l-1-5.7l4.1-4C21.9,10.5,22,10.3,22,10.1z"}})])})),0)]),s("div",{staticClass:"mb-6"},[s("label",{staticClass:"text-xs text-gray-400 mb-1 block",attrs:{for:"body"}},[t._v("Aggiungi un commento *")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.review.body,expression:"review.body"}],staticClass:"resize-none w-full border border-gray-100 focus:outline-none focus:border-primary-100 transition p-3 text-sm",attrs:{rows:"6",name:"body"},domProps:{value:t.review.body},on:{input:function(e){e.target.composing||t.$set(t.review,"body",e.target.value)}}})]),s("baseButton",{staticClass:"w-full",attrs:{text:"Salva"}})],1)])])},o=[],c=(s("d3b7"),s("159b"),s("b64b"),s("dab4")),l=s("cb5a"),u={props:{book:{type:[Object,Array],required:!1}},components:{baseButton:c["a"],errorMessages:l["a"]},data:function(){return{review:{title:"",rating:0,body:""}}},watch:{success:{handler:function(){this.success&&(this.closeSidebarReview(),this.$store.dispatch("reviews/setSuccessStatus",!1))},deep:!0,immediate:!0}},computed:{show:function(){return this.$store.getters["reviews/show"]},errors:function(){return this.$store.getters["reviews/errors"]},success:function(){return this.$store.getters["reviews/success"]}},methods:{closeSidebarReview:function(){var t=this;this.$store.dispatch("reviews/toggleShow",!1),this.$store.dispatch("reviews/clearErrors"),Object.keys(this.review).forEach((function(e){return t.review[e]=""})),this.$emit("emptySelectedBook")},selectRating:function(t){this.review.rating=t},storeReview:function(){this.$store.dispatch("reviews/storeReview",{id:this.book.id,review:this.review})}}},d=u,v=s("2877"),p=Object(v["a"])(d,n,o,!1,null,null,null),b=p.exports,m={name:"Orders",components:{pageHeader:a["a"],addReview:b},mounted:function(){this.getOrders(),this.getReviews()},data:function(){return{selectedBook:[]}},computed:{orders:function(){return this.$store.getters["orders/orders"]},reviews:function(){return this.$store.getters["reviews/reviews"]},reviewed:function(){return this.$store.getters["reviews/reviewed"]}},methods:{getOrders:function(){this.$store.dispatch("orders/getOrders")},getReviews:function(){this.$store.dispatch("reviews/getReviews")},hasBeenReviewed:function(t){return this.reviewed.includes(t)},openSidebarReview:function(t){this.selectedBook=t,this.$store.dispatch("reviews/toggleShow",!0)},emptySelectedBook:function(){this.selectedBook=[]}},filters:{truncate:function(t){return t.length>350?t.substring(0,350)+"...":t}}},f=m,h=Object(v["a"])(f,r,i,!1,null,null,null);e["default"]=h.exports},ab13:function(t,e,s){var r=s("b622"),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(s){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},caad:function(t,e,s){"use strict";var r=s("23e7"),i=s("4d64").includes,a=s("44d2");r({target:"Array",proto:!0},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},cb5a:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!=t.errors.length?s("div",{class:{"bg-red-100 p-3 mb-6":0!=t.errors.length}},t._l(t.errors,(function(e,r){return s("div",{key:r,staticClass:"text-red-500 text-sm"},[t._v(" "+t._s(e[0])+" ")])})),0):t._e()},i=[],a={name:"errorMessages",props:{errors:{type:[Array,Object],required:!0}}},n=a,o=s("2877"),c=Object(o["a"])(n,r,i,!1,null,null,null);e["a"]=c.exports},dab4:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"bg-secondary-100 hover:bg-secondary-200 transition text-white p-2 text-sm",attrs:{type:t.type}},[t._v(" "+t._s(t.text)+" ")])},i=[],a={name:"baseButton",props:{text:{type:String,default:"Submit"},type:{type:String,default:"submit"}}},n=a,o=s("2877"),c=Object(o["a"])(n,r,i,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=orders.8389c3f8.js.map