(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["reviews"],{"0584":function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"border-b border-gray-200 py-8 mb-6"},[s("p",{staticClass:"text-lg text-gray-600"},[e._v(e._s(e.text))])])},i=[],a={name:"pageHeader",props:{text:{type:String,required:!0}}},n=a,o=s("2877"),l=Object(o["a"])(n,r,i,!1,null,null,null);t["a"]=l.exports},"408a":function(e,t,s){var r=s("e330");e.exports=r(1..valueOf)},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,s){var r=s("e330"),i=s("1d80"),a=s("577e"),n=s("5899"),o=r("".replace),l="["+n+"]",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(e){return function(t){var s=a(i(t));return 1&e&&(s=o(s,c,"")),2&e&&(s=o(s,u,"")),s}};e.exports={start:d(1),end:d(2),trim:d(3)}},7156:function(e,t,s){var r=s("1626"),i=s("861d"),a=s("d2bb");e.exports=function(e,t,s){var n,o;return a&&r(n=t.constructor)&&n!==s&&i(o=n.prototype)&&o!==s.prototype&&a(e,o),e}},"82ef":function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.user?s("div",[e.user.image?s("img",{attrs:{src:e.imagePath,alt:"user image"}}):s("img",{attrs:{src:"https://eu.ui-avatars.com/api/?name="+e.user.name,alt:"user image"}})]):s("div",[s("img",{attrs:{src:"https://eu.ui-avatars.com/api/?name=undefined",alt:"user image"}})])])},i=[],a={name:"userImage",props:{user:{type:[Object,null],required:!1}},computed:{imagePath:function(){return"http://localhost:8000/storage/"+this.user.image.url}}},n=a,o=s("2877"),l=Object(o["a"])(n,r,i,!1,null,null,null);t["a"]=l.exports},9705:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pb-10"},[s("div",{staticClass:"flex space-x-4"},[s("div",{staticClass:"flex-none"},[s("userImage",{staticClass:"w-9 rounded-full",attrs:{user:e.review.user}})],1),s("div",[s("div",{staticClass:"flex items-start space-x-3"},[e.review.user?s("h4",{staticClass:"text-gray-600 text-sm font-semibold"},[e._v(e._s(e.review.user.name))]):s("h4",{staticClass:"text-gray-400 text-sm"},[e._v("Utente cancellato")]),s("div",{staticClass:"flex items-center space-x-4"},[s("div",{staticClass:"flex items-center"},[e._l(e.review.rating,(function(t){return s("svg",{key:t+e.$uniqid(),staticClass:"w-4 flex-none text-primary-300",attrs:{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M22,10.1c0.1-0.5-0.3-1.1-0.8-1.1l-5.7-0.8L12.9,3c-0.1-0.2-0.2-0.3-0.4-0.4C12,2.3,11.4,2.5,11.1,3L8.6,8.2L2.9,9C2.6,9,2.4,9.1,2.3,9.3c-0.4,0.4-0.4,1,0,1.4l4.1,4l-1,5.7c0,0.2,0,0.4,0.1,0.6c0.3,0.5,0.9,0.7,1.4,0.4l5.1-2.7l5.1,2.7c0.1,0.1,0.3,0.1,0.5,0.1v0c0.1,0,0.1,0,0.2,0c0.5-0.1,0.9-0.6,0.8-1.2l-1-5.7l4.1-4C21.9,10.5,22,10.3,22,10.1z"}})])})),e._l(5-e.review.rating,(function(t){return s("svg",{key:t+e.$uniqid(),staticClass:"w-4.5 flex-none text-gray-300",attrs:{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M22,10.1c0.1-0.5-0.3-1.1-0.8-1.1l-5.7-0.8L12.9,3c-0.1-0.2-0.2-0.3-0.4-0.4C12,2.3,11.4,2.5,11.1,3L8.6,8.2L2.9,9C2.6,9,2.4,9.1,2.3,9.3c-0.4,0.4-0.4,1,0,1.4l4.1,4l-1,5.7c0,0.2,0,0.4,0.1,0.6c0.3,0.5,0.9,0.7,1.4,0.4l5.1-2.7l5.1,2.7c0.1,0.1,0.3,0.1,0.5,0.1v0c0.1,0,0.1,0,0.2,0c0.5-0.1,0.9-0.6,0.8-1.2l-1-5.7l4.1-4C21.9,10.5,22,10.3,22,10.1z"}})])}))],2)])]),s("span",{staticClass:"block text-gray-400 text-xs"},[e._v(e._s(e.$moment(e.review.created_at).format("DD-MM-YYYY H:mm")))]),s("div",{staticClass:"mt-2 text-sm"},[e.review.title?s("p",{staticClass:"leading-tight text-gray-600 mb-1"},[e._v(e._s(e.review.title))]):e._e(),s("p",{staticClass:"text-gray-400 leading-tight"},[e._v(e._s(e.review.body))])]),"Reviews"===e.$route.name?s("div",{staticClass:"mt-4 text-xs text-gray-400 "},[s("span",[e._v("Recensione di: ")]),s("router-link",{staticClass:"hover:text-primary-300 transition",attrs:{to:{name:"Book.show",params:{id:e.review.book.id}}}},[e._v(" "+e._s(e.review.book.title)+" ")])],1):e._e(),"Reviews"===e.$route.name&&e.user&&e.user.id===e.review.user.id?s("div",{staticClass:"mt-4 text-xs text-gray-400 flex items-center space-x-2"},[s("span",{staticClass:"cursor-pointer hover:text-primary-300 transition",on:{click:function(t){return e.openEditMenu()}}},[e._v("Modifica")]),s("span",{staticClass:"cursor-pointer hover:text-red-500 transition",on:{click:function(t){return e.deleteReview()}}},[e._v("Elimina")])]):e._e()])])])},i=[],a=(s("a9e3"),s("82ef")),n={name:"singleReview",components:{userImage:a["a"]},props:{review:{type:Object,required:!0},index:{type:Number,required:!1}},computed:{user:function(){return this.$store.getters["auth/user"]}},methods:{deleteReview:function(){confirm("Eliminare la recensione?")&&this.$store.dispatch("reviews/deleteReview",{id:this.review.id,index:this.index})},openEditMenu:function(){this.$emit("openEditMenu",this.review)}}},o=n,l=s("2877"),c=Object(l["a"])(o,r,i,!1,null,null,null);t["a"]=c.exports},a9e3:function(e,t,s){"use strict";var r=s("83ab"),i=s("da84"),a=s("e330"),n=s("94ca"),o=s("6eeb"),l=s("1a2d"),c=s("7156"),u=s("3a9b"),d=s("d9b5"),v=s("c04e"),p=s("d039"),f=s("241c").f,m=s("06cf").f,w=s("9bf2").f,g=s("408a"),x=s("58a8").trim,b="Number",h=i[b],y=h.prototype,_=i.TypeError,C=a("".slice),E=a("".charCodeAt),R=function(e){var t=v(e,"number");return"bigint"==typeof t?t:M(t)},M=function(e){var t,s,r,i,a,n,o,l,c=v(e,"number");if(d(c))throw _("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=x(c),t=E(c,0),43===t||45===t){if(s=E(c,2),88===s||120===s)return NaN}else if(48===t){switch(E(c,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=C(c,2),n=a.length,o=0;o<n;o++)if(l=E(a,o),l<48||l>i)return NaN;return parseInt(a,r)}return+c};if(n(b,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var k,$=function(e){var t=arguments.length<1?0:h(R(e)),s=this;return u(y,s)&&p((function(){g(s)}))?c(Object(t),s,$):t},N=r?f(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),I=0;N.length>I;I++)l(h,k=N[I])&&!l($,k)&&w($,k,m(h,k));$.prototype=y,y.constructor=$,o(i,b,$)}},cb5a:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return 0!=e.errors.length?s("div",{class:{"bg-red-100 p-3 mb-6":0!=e.errors.length}},e._l(e.errors,(function(t,r){return s("div",{key:r,staticClass:"text-red-500 text-sm"},[e._v(" "+e._s(t[0])+" ")])})),0):e._e()},i=[],a={name:"errorMessages",props:{errors:{type:[Array,Object],required:!0}}},n=a,o=s("2877"),l=Object(o["a"])(n,r,i,!1,null,null,null);t["a"]=l.exports},dab4:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"bg-secondary-100 hover:bg-secondary-200 transition text-white p-2 text-sm",attrs:{type:e.type}},[e._v(" "+e._s(e.text)+" ")])},i=[],a={name:"baseButton",props:{text:{type:String,default:"Submit"},type:{type:String,default:"submit"}}},n=a,o=s("2877"),l=Object(o["a"])(n,r,i,!1,null,null,null);t["a"]=l.exports},db4d:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("pageHeader",{attrs:{text:"Le mie recensioni"}}),e.reviews?s("div",{staticClass:"pt-6"},[e._l(e.reviews,(function(t,r){return s("singleReview",{key:t.id,attrs:{review:t,index:r},on:{openEditMenu:e.openEditMenu}})})),e.showEditMenu?s("div",{staticClass:"fixed inset-0 bg-black opacity-20 z-10",on:{click:function(t){return e.closeEditMenu()}}}):e._e(),s("div",{staticClass:"fixed transform transition ease-linear bg-white right-0 top-0 bottom-0 z-20 w-full md:w-96 shadow-xl",class:{"translate-x-full":!e.showEditMenu}},[s("header",{staticClass:"border-b p-6 flex justify-between items-center"},[s("span",{staticClass:"block text-gray-600 text-sm"},[e._v("Modifica recensione")]),s("svg",{staticClass:"w-5 h-5 flex-none text-gray-400 hover:text-gray-600 transition cursor-pointer",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},on:{click:function(t){return e.closeEditMenu()}}},[s("path",{attrs:{fill:"currentColor",d:"M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"}})])]),e.selectedReview?s("div",{staticClass:"p-6"},[s("p",{staticClass:"text-xs text-gray-400 mb-1"},[e._v("Recensione per")]),s("p",{staticClass:"text-sm text-gray-600 leading-tight"},[e._v(e._s(e.selectedReview.book.title))])]):e._e(),e.selectedReview?s("form",{staticClass:"p-6",on:{submit:function(t){return t.preventDefault(),e.updateReview.apply(null,arguments)}}},[s("errorMessages",{attrs:{errors:e.errors}}),s("div",{staticClass:"mb-6"},[s("label",{staticClass:"text-xs text-gray-400 mb-1 block",attrs:{for:"title"}},[e._v("Modifica il titolo della tua recensione")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedReview.title,expression:"selectedReview.title"}],staticClass:"w-full border border-gray-100 focus:outline-none focus:border-primary-100 transition p-3 text-sm",attrs:{type:"text",name:"title"},domProps:{value:e.selectedReview.title},on:{input:function(t){t.target.composing||e.$set(e.selectedReview,"title",t.target.value)}}})]),s("div",{staticClass:"mb-6"},[s("label",{staticClass:"text-xs text-gray-400 mb-1 block",attrs:{for:"title"}},[e._v("Modifica la tua valutazione *")]),s("div",{staticClass:"flex items-center"},e._l(5,(function(t){return s("svg",{key:t,staticClass:"w-5 flex-none text-gray-300",class:{"text-primary-300":t<=e.selectedReview.rating},attrs:{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",viewBox:"0 0 24 24"},on:{click:function(s){return e.selectRating(t)}}},[s("path",{attrs:{fill:"currentColor",d:"M22,10.1c0.1-0.5-0.3-1.1-0.8-1.1l-5.7-0.8L12.9,3c-0.1-0.2-0.2-0.3-0.4-0.4C12,2.3,11.4,2.5,11.1,3L8.6,8.2L2.9,9C2.6,9,2.4,9.1,2.3,9.3c-0.4,0.4-0.4,1,0,1.4l4.1,4l-1,5.7c0,0.2,0,0.4,0.1,0.6c0.3,0.5,0.9,0.7,1.4,0.4l5.1-2.7l5.1,2.7c0.1,0.1,0.3,0.1,0.5,0.1v0c0.1,0,0.1,0,0.2,0c0.5-0.1,0.9-0.6,0.8-1.2l-1-5.7l4.1-4C21.9,10.5,22,10.3,22,10.1z"}})])})),0)]),s("div",{staticClass:"mb-6"},[s("label",{staticClass:"text-xs text-gray-400 mb-1 block",attrs:{for:"body"}},[e._v("Modifica il commento *")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.selectedReview.body,expression:"selectedReview.body"}],staticClass:"resize-none w-full border border-gray-100 focus:outline-none focus:border-primary-100 transition p-3 text-sm",attrs:{rows:"12",name:"body"},domProps:{value:e.selectedReview.body},on:{input:function(t){t.target.composing||e.$set(e.selectedReview,"body",t.target.value)}}})]),s("baseButton",{staticClass:"w-full",attrs:{text:"Salva"}})],1):e._e()])],2):e._e()],1)},i=[],a=s("0584"),n=s("9705"),o=s("dab4"),l=s("cb5a"),c={name:"Reviews",components:{pageHeader:a["a"],singleReview:n["a"],baseButton:o["a"],errorMessages:l["a"]},mounted:function(){this.getReviews()},watch:{success:{handler:function(){this.success&&(this.closeEditMenu(),this.$store.dispatch("reviews/setSuccessStatus",!1))},deep:!0,immediate:!0}},data:function(){return{showEditMenu:!1,selectedReview:null}},computed:{reviews:function(){return this.$store.getters["reviews/reviews"]},errors:function(){return this.$store.getters["reviews/errors"]},success:function(){return this.$store.getters["reviews/success"]}},methods:{getReviews:function(){this.$store.dispatch("reviews/getReviews")},openEditMenu:function(e){this.showEditMenu=!0,this.selectedReview=e},closeEditMenu:function(){this.showEditMenu=!1,this.$store.dispatch("reviews/clearErrors")},updateReview:function(){this.$store.dispatch("reviews/updateReview",{review:this.selectedReview})}}},u=c,d=s("2877"),v=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=reviews.443bdd04.js.map