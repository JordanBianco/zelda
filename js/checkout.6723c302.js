(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["checkout"],{"0584":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"border-b border-gray-200 py-8 mb-6"},[s("p",{staticClass:"text-lg text-gray-600"},[t._v(t._s(t.text))])])},r=[],i={name:"pageHeader",props:{text:{type:String,required:!0}}},o=i,n=s("2877"),l=Object(n["a"])(o,a,r,!1,null,null,null);e["a"]=l.exports},"768d":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.errors,(function(e,a){return s("div",{key:a},[e.book_id===t.item.book.id?s("div",{staticClass:"bg-blue-100 text-blue-500 text-sm p-4 rounded-lg my-4 flex items-start space-x-2"},[s("div",{staticClass:"flex items-start space-x-3 w-full"},[s("svg",{staticClass:"w-5 h-5 flex-none",attrs:{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M12,2A10,10,0,1,0,22,12,10.01114,10.01114,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.00917,8.00917,0,0,1,12,20Zm0-8.5a1,1,0,0,0-1,1v3a1,1,0,0,0,2,0v-3A1,1,0,0,0,12,11.5Zm0-4a1.25,1.25,0,1,0,1.25,1.25A1.25,1.25,0,0,0,12,7.5Z"}})]),s("span",[t._v(t._s(e.message))])]),s("div",{staticClass:"hover:bg-blue-200 p-1 rounded-full cursor-pointer",on:{click:function(e){return t.removeErrorMessage(a)}}},[s("svg",{staticClass:"w-5 h-5 flex-none",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"}})])])]):t._e()])})),0)},r=[],i=(s("a434"),{name:"quantityErrors",props:{item:{type:Object,required:!0},errors:{type:Array,required:!0}},methods:{removeErrorMessage:function(t){this.errors.splice(t,1)}}}),o=i,n=s("2877"),l=Object(n["a"])(o,a,r,!1,null,null,null);e["a"]=l.exports},"7cb4":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("pageHeader",{attrs:{text:"Checkout"}}),t.overlay?s("div",{staticClass:"bg-black opacity-20 fixed inset-0 flex justify-center items-center"},[s("svg",{staticClass:"animate-spin w-8 h-8 flex-none text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M6.8042,15A.99956.99956,0,0,0,5.438,14.63379l-1.73242,1a1.00016,1.00016,0,0,0,1,1.73242l1.73242-1A1.00073,1.00073,0,0,0,6.8042,15ZM3.70557,8.36621l1.73242,1a1.00016,1.00016,0,1,0,1-1.73242l-1.73242-1a1.00016,1.00016,0,0,0-1,1.73242ZM6,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H5A1,1,0,0,0,6,12ZM17.1958,9a1.0006,1.0006,0,0,0,1.36621.36621l1.73242-1a1.00016,1.00016,0,1,0-1-1.73242l-1.73242,1A1.00073,1.00073,0,0,0,17.1958,9ZM15,6.8042A1.0006,1.0006,0,0,0,16.36621,6.438l1-1.73242a1.00016,1.00016,0,1,0-1.73242-1l-1,1.73242A1.00073,1.00073,0,0,0,15,6.8042Zm5.29443,8.82959-1.73242-1a1.00016,1.00016,0,1,0-1,1.73242l1.73242,1a1.00016,1.00016,0,0,0,1-1.73242ZM16.36621,17.562a1.00016,1.00016,0,1,0-1.73242,1l1,1.73242a1.00016,1.00016,0,1,0,1.73242-1ZM21,11H19a1,1,0,0,0,0,2h2a1,1,0,0,0,0-2Zm-9,7a1,1,0,0,0-1,1v2a1,1,0,0,0,2,0V19A1,1,0,0,0,12,18Zm-3-.8042a.99954.99954,0,0,0-1.36621.36621l-1,1.73242a1.00016,1.00016,0,0,0,1.73242,1l1-1.73242A1.00073,1.00073,0,0,0,9,17.1958ZM12,2a1,1,0,0,0-1,1V5a1,1,0,0,0,2,0V3A1,1,0,0,0,12,2Z"}})])]):t._e(),s("div",{staticClass:"md:flex md:space-x-10"},[s("div",{staticClass:"md:w-2/3"}),s("div",{staticClass:"md:w-1/3"},[t._m(0),t.items.length?s("div",[t._l(t.items,(function(e){return s("div",{key:e.id,staticClass:"mb-4"},[s("quantityErrors",{attrs:{item:e,errors:t.errors}}),s("div",{staticClass:"flex space-x-2"},[s("router-link",{staticClass:"h-24 w-20 block flex-none",attrs:{to:{name:"Book.show",params:{id:e.book.id}}}},[s("img",{staticClass:"object-cover w-full h-full shadow-lg",attrs:{src:"https://source.unsplash.com/random",alt:""}})]),s("div",{staticClass:"flex flex-col justify-between w-full"},[s("div",[s("p",{staticClass:"leading-tight text-xs mb-1 text-gray-600"},[t._v(t._s(e.book.title))]),t._l(e.book.authors,(function(e){return s("router-link",{key:e.id,staticClass:"block text-xs leading-tight text-gray-400 hover:text-gray-600",attrs:{to:""}},[t._v(" "+t._s(e.name)+" ")])}))],2),s("div",{staticClass:"flex items-center justify-between text-sm"},[s("p",[t._v("x"+t._s(e.quantity))]),s("span",{staticClass:"block text-primary-300"},[t._v("€"+t._s(e.book.price)+",00")])])])],1)],1)})),s("footer",{staticClass:"mt-10 space-y-4"},[s("div",{staticClass:"flex justify-between items-center"},[s("span",{staticClass:"text-sm text-gray-600"},[t._v("Totale")]),s("span",{staticClass:"text-lg text-gray-600"},[t._v("€"+t._s(t.total)+",00")])]),s("button",{staticClass:"w-full bg-green-c-100 hover:bg-green-c-200 transition focus:outline-none text-white text-sm px-4 py-3",on:{click:function(e){return t.storeOrder()}}},[t._v(" Acquista ora ")])])],2):s("div",{staticClass:"flex justify-center items-center h-24"},[s("svg",{staticClass:"animate-spin w-8 h-8 flex-none text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M6.8042,15A.99956.99956,0,0,0,5.438,14.63379l-1.73242,1a1.00016,1.00016,0,0,0,1,1.73242l1.73242-1A1.00073,1.00073,0,0,0,6.8042,15ZM3.70557,8.36621l1.73242,1a1.00016,1.00016,0,1,0,1-1.73242l-1.73242-1a1.00016,1.00016,0,0,0-1,1.73242ZM6,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H5A1,1,0,0,0,6,12ZM17.1958,9a1.0006,1.0006,0,0,0,1.36621.36621l1.73242-1a1.00016,1.00016,0,1,0-1-1.73242l-1.73242,1A1.00073,1.00073,0,0,0,17.1958,9ZM15,6.8042A1.0006,1.0006,0,0,0,16.36621,6.438l1-1.73242a1.00016,1.00016,0,1,0-1.73242-1l-1,1.73242A1.00073,1.00073,0,0,0,15,6.8042Zm5.29443,8.82959-1.73242-1a1.00016,1.00016,0,1,0-1,1.73242l1.73242,1a1.00016,1.00016,0,0,0,1-1.73242ZM16.36621,17.562a1.00016,1.00016,0,1,0-1.73242,1l1,1.73242a1.00016,1.00016,0,1,0,1.73242-1ZM21,11H19a1,1,0,0,0,0,2h2a1,1,0,0,0,0-2Zm-9,7a1,1,0,0,0-1,1v2a1,1,0,0,0,2,0V19A1,1,0,0,0,12,18Zm-3-.8042a.99954.99954,0,0,0-1.36621.36621l-1,1.73242a1.00016,1.00016,0,0,0,1.73242,1l1-1.73242A1.00073,1.00073,0,0,0,9,17.1958ZM12,2a1,1,0,0,0-1,1V5a1,1,0,0,0,2,0V3A1,1,0,0,0,12,2Z"}})])])])])],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"my-4"},[s("h4",{staticClass:"text-gray-600 border-b py-4"},[t._v("Riepilogo ordine")])])}],i=(s("d3b7"),s("159b"),s("a434"),s("0584")),o=s("768d"),n={name:"Chekcout",components:{pageHeader:i["a"],quantityErrors:o["a"]},mounted:function(){this.checkQuantity()},watch:{success:function(){this.success&&(this.overlay=!1,this.setSuccessStatus(!1))},items:function(){0==this.items.length&&this.$router.push({name:"Book.index"})}},data:function(){return{overlay:!1,errors:[{message:"",book_id:""}]}},computed:{user:function(){return this.$store.getters["auth/user"]},items:function(){return this.$store.getters["cart/items"]},total:function(){var t=0;return this.items.forEach((function(e){return t+=e.book.price*e.quantity})),t},success:function(){return this.$store.getters["orders/success"]}},methods:{storeOrder:function(){this.overlay=!0,this.$store.dispatch("orders/storeOrder",{user_id:this.user.id,items:this.items,total:this.total})},setSuccessStatus:function(t){this.$store.dispatch("orders/setSuccessStatus",t)},checkQuantity:function(){var t=this;this.items.forEach((function(e){e.quantity>e.book.quantity_in_stock&&(t.errors.push({message:"Sono disponibili solo "+e.book.quantity_in_stock+' copie di "'+e.book.title+'"',book_id:e.book.id}),t.$store.dispatch("cart/adjustQuantity",{item:e}))}))},removeErrorMessage:function(t){this.errors.splice(t,1)}}},l=n,c=s("2877"),u=Object(c["a"])(l,a,r,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=checkout.6723c302.js.map